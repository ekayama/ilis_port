<div id="error">
<% if @comment.errors.any? %>
<h3><%= @comment.errors.count %> errors prohibited this obj from being saved:</h3>
<ul>
  <% @comment.errors.full_messages.each do |message| %>
    <li><%= message %></li>
  <% end %>
</ul>
<% end %>


<br>
<%= link_to new_post_path, class: 'dropdown-item nav-link text-black'  do %>
  <i class="fa-solid fa-pen-to-square"></i> 投稿フォーム
<% end %>
<%= render "searches/form" %>
<%= link_to "Back", posts_path %>
<br><br>

<div>
      <%= link_to user_path(@user) do %>
         ユーザーネーム：<%= @post.user.username %>
      <% end %><br>
       ユーザー画像：<%= image_tag @post.user.get_profile_image(100,100) %><br><br>
       <%= image_tag @post.get_image(400,400) %><br>
       タイトル:<%= @post.title %><br>
       本文:<%= @post.body %><br>
       投稿日:<%= @post.created_at.strftime('%Y/%m/%d') %><br>

       <% if @post.user == current_user %>
         <%= link_to "削除", post_path(@post), method: :delete, "data-confirm" => "本当に削除しますか？" %>
         <%= link_to "編集", edit_post_path(@post.id) %>
       <% end %>
</div>
<br>

<div>
 <strong>コメント一覧</strong><br>
 <p><%=  "#{@post.comments.count} コメント" %></p>
    <% @post.comments.each do |comment| %>
      <%= link_to user_path(comment.user) do %>
        <%= image_tag comment.user.get_profile_image(50,50) %>
        <%= comment.user.username %><br>
      <% end %>

      <%= comment.comment %> | <span>
      <% if comment.user == current_user %>
        <%= link_to "削除", post_comment_path(@post, comment), method: :delete,
            class: "btn btn-danger pull-right",
            data: { confirm: "本当に削除しますか？" } %>
      <% end %><br><br><br>
    <% end %>

    <%= form_with model: [@post, @comment], local: true do |f| %>
      <%= f.text_area :comment, rows:'5', placeholder: "コメントをここに", class: "w-100" %>
      <%= f.submit "送信" %>
    <% end %>
</div>



